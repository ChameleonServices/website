<link rel="import" href="../bower_components/paper-styles/shadow.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">

<dom-module id="cs-jobs">
        <template>
            <style>
                :host {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    flex-direction: column;
                    width: 100%;
                    height: 100%;
                    box-sizing: border-box;
                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                }

                main {
                    width: 80%;
                    max-width: 600px;
                    box-sizing: border-box;
                    padding: 1em;
                    @apply --shadow-elevation-3dp;
                    border: 1px solid gray;
                    margin: 1.4em 0;
                }

                h3, h4 {
                    margin-bottom: 0 !important;
                }

                h3 {
                    margin-top: 1.4em;
                    text-align: center;
                    text-transform: uppercase;
                    font-size: 14pt;
                    border-bottom: 3px double darkgray;
                    padding-bottom: 4px;
                }

                div.horizontal {
                    display: flex;
                    flex-direction: row;
                }

                div.horizontal > input {
                    flex-grow: 1;
                    --paper-input-container: {
                        padding: 0 !important;
                    }
                }

                div.horizontal > input:not(:first-child) {
                    margin-left: .4em;
                }


                section#references table {
                    width: 100%;
                    border-collapse: separate;
                    border-spacing: .4em .6em;
                }

                section#references table th {
                    text-align: left;
                }

                section#references table th:first-child {
                    width: 60%;
                }

                td > input {
                    width: 100%;
                }

                input {
                    display: inline-block;
                    align-self: center;
                    height: 1.4em;
                    border: none;
                    border-bottom: 2px solid lightblue;
                    padding: .2em;
                    margin: .2em 0;
                }

                input:invalid {
                    border-color: coral;
                }

                input:valid {
                    border-color: lightgreen;
                }

                input[required] {
                    border-color: blueviolet;
                }

                .full-width {
                    width: 100%;
                    display: inline-block;
                }

                input + label {
                    margin-left: .4em;
                }

                .stretch {
                    flex-grow: 1;
                }
            </style>

            <main>
                <h1>Application for Employment</h1>
                <hr />

                <section id="form-wrapper">
                <form>
                    <h3>Contact Information</h3>
                    <div class="horizontal">
                        <input required type="text" placeholder="First Name" name="fname">
                        <input required type="text" placeholder="Last Name" name="lname">
                    </div>

                    <input class="full-width" required type="email" placeholder="Your Email Address" name="email">
                    <input class="full-width" required type="tel" placeholder="Primary Phone" name="phone">

                    <h3>Address</h3>
                    <input required class="full-width" type="text" placeholder="Street Address" name="street">

                    <div class="horizontal">
                        <input required type="text" placeholder="State" name="state">
                        <input required type="text" placeholder="City" name="city">
                        <input required type="text" placeholder="Zip Code" name="zip">
                    </div>

                    <h3>Background</h3>
                    <div>Have you ever pled 'guilty', 'no contest' to, or been convicted of a crime?</div>
                    <div class="horizontal">
                        <div class="horizontal">
                            <input required id="crime-yes" type="radio" name="crime" value="yes" />
                            <label for="crime-yes">Yes</label>
                        </div>

                        <div style="width: 1.4em;"></div>

                        <div class="horizontal">
                            <input required id="crime-no" type="radio" name="crime" value="no" />
                            <label for="crime-no">No</label>
                        </div>
                    </div>

                    <section id="references">
                        <h3>References</h3>
                        <p>Please use professional references first. If you do not have three references,
                            leave the remaining spaces blank.</p>

                        <table>
                            <thead>
                                <tr>
                                    <th>Reference Name</th>
                                    <th>Phone Number</th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>
                                    <td><input type="text" name="ref1-name" placeholder="Reference 1" /></td>
                                    <td><input type="tel" name="ref1-phone" placeholder="Phone" /></td>
                                </tr>

                                <tr>
                                    <td><input type="text" name="ref2-name" placeholder="Reference 2" /></td>
                                    <td><input type="tel" name="ref2-phone" placeholder="Phone" /></td>
                                </tr>

                                <tr>
                                    <td><input type="text" name="ref3-name" placeholder="Reference 3" /></td>
                                    <td><input type="tel" name="ref3-phone" placeholder="Phone" /></td>
                                </tr>
                            </tbody>
                        </table>

                        <p>Please also include any personal references below:</p>
                        <table>
                            <thead>
                                <tr>
                                    <th>Reference Name</th>
                                    <th>Phone Number</th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>
                                    <td><input type="text" name="ref1-name" placeholder="Reference 1" /></td>
                                    <td><input type="tel" name="ref1-phone" placeholder="Phone" /></td>
                                </tr>

                                <tr>
                                    <td><input type="text" name="ref2-name" placeholder="Reference 2" /></td>
                                    <td><input type="tel" name="ref2-phone" placeholder="Phone" /></td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- Name of Company -->
                        <!-- Dates of Employment -->
                        <!-- Contact (name + number) -->
                        <!-- Address (not required) -->

                        <paper-button on-tap="submitForm" raised elevation="3">Submit</paper-button>
                    </form>
                    </section>
                </section>
            </main>
        </template>
    
        <script>
            class Jobs extends Polymer.Element {
                static get is() { return 'cs-jobs' }

                ready() {
                    super.ready();
                    this.form = this.shadowRoot.querySelector("form");
                    this.form.addEventListener("submit", (event) => {
                        console.log(event);
                        this.handleSubmission(event);
                    });
                }

                submitForm() {
                    let form = this.shadowRoot.querySelector("form");
                    if(!form.reportValidity())
                        return;

                    let url = "https://requestb.in/usf8kjus";
                    let data = new FormData(form);

                    let request = new XMLHttpRequest();
                    // Define what happens on successful data submission
                    request.addEventListener("load", function(event) {
                        console.log(event.target.responseText);
                    });

                    // Define what happens in case of error
                    request.addEventListener("error", function(event) {
                        alert('Oups! Something goes wrong.');
                    });

                    // Set up our request
                    request.open("POST", url);

                    // The data sent is what the user provided in the form
                    request.send(data);
                }
            }

            customElements.define(Jobs.is, Jobs);
        </script>
    </dom-module>